{% extends "base.html" %}
{% block title %}{% endblock %}

{% block head %}
{% endblock %}

{% block content %}

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../static/img/Pokemon-Go-City.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="intro-message">
                        <h1>Attract Fans</h1>
                        <hr class="intro-divider">
                        <h3>Social media analysis of over 275,000 tweets</h3>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <body>
<div class="container">
    <div class="col-md-12">
        <hr class="section-headingspacer" align="center">
        <div class="clearfix"></div>
        <h2 class="section-heading" align="left">When do most people play Pokémon GO?</h2>
        <p class="lead" align="left">Timeseries Analysis of the hourly tweets count shows the daily seasonal effects in the tweets data. The data shows people are more likely to tweet about Pokémon GO during 5-9 PM, suggesting most people are likely to play during their evening commute. The average hourly tweet number can be simply modeled by a trigonometric function with a period of 24h.</p>
        <p><iframe style="border: 1px solid #ccc" width="100%" height="600" src="{{url_for('static', filename='timeseries_model.html')}}"></iframe></p>
        <!--img class="img-responsive" src="../static/timeseries_model.png" alt=""-->

    </div>
</div>  

<div class="container">
    <div class="col-md-12">
        <hr class="section-headingspacer" align="center">
        <div class="clearfix"></div>
        <h2 class="section-heading" align="left">Where are the fans coming from?</h2>
        <p class="lead" align="left">The twitter user locations were geocoded by Google APIs and displayed on the map. These data not only shows how pokemongo craze took over the entire world, but also the geographic variation in response to the game. Basically, the number of tweets from each state is linearly correlated with the state population. After normalizing the number of tweets by the state population, I found the game is mostly popular in NY, TX and the west coast of US.</p>
        <p><iframe style="border: 1px solid #ccc" width="100%" height="600" src="{{url_for('static', filename='plotly_tweet_states.html')}}"></iframe></p>
    </div>
    <div class="col-md-12">
        <hr class="section-headingspacer" align="center">
        <div class="clearfix"></div>
        <p class="lead" align="left">More interestingly is the normalized number of tweets has a negative correlation with the state obesity rate (shown in the map below), which suggests that while Pokémon Go ask people to get moving more in order to catch’em all, but in reality, this strategy may only work for people who are already fit rather than fat.</p>
        <p><iframe style="border: 1px solid #ccc" width="100%" height="600" src="{{url_for('static', filename='plotly_obesity_states.html')}}"></iframe></p>
    </div>
</div>
<div class="container">
    <div class="col-md-12">
        <hr class="section-headingspacer" align="center">
        <div class="clearfix"></div>
        <h2 class="section-heading" align="center"><span style="color:#FF7700">Popularity</span> vs. <span style="color:#177CDA">Obesity</span></h2>
        <br>
        <br>
        <meta charset="utf-8">
        <style>
        form {
          font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
          position: absolute;
          left: 10px;
          top: 10px;
        }
        label {
          display: block;
        }

        </style>
        <form>
          <label><input type="radio" name="mode" value="grouped"> Grouped</label>
          <label><input type="radio" name="mode" value="stacked" checked> Stacked</label>
        </form>
        <svg width="900" height="400"></svg>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script>
        var n = 2, // The number of series.
            m = 50; // The number of values per series.
        // The xz array has m elements, representing the x-values shared by all series.
        // The yz array has n elements, representing the y-values of each of the n series.
        // Each yz[i] is an array of m non-negative numbers representing a y-value for xz[i].
        // The y01z array has the same structure as yz, but with stacked [y₀, y₁] instead of y.
        var xz = d3.range(m)
            yz = [[0.0,0.00729927007299,0.014598540146,0.021897810219,0.029197080292,0.0510948905109,0.0729927007299,0.0802919708029,0.160583941606,0.175182481752,0.189781021898,0.189781021898,0.189781021898,0.204379562044,0.211678832117,0.211678832117,0.21897810219,0.240875912409,0.277372262774,0.284671532847,0.299270072993,0.313868613139,0.328467153285,0.328467153285,0.335766423358,0.350364963504,0.36496350365,0.372262773723,0.379562043796,0.379562043796,0.394160583942,0.408759124088,0.423357664234,0.452554744526,0.467153284672,0.474452554745,0.481751824818,0.489051094891,0.496350364964,0.496350364964,0.510948905109,0.540145985401,0.540145985401,0.56204379562,0.605839416058,0.620437956204,0.642335766423,0.686131386861,0.722627737226,1.0],[0.0,0.382430049097,0.658333124368,0.412493334974,0.325164763761,0.676393565282,0.0747354497354,0.462193703328,0.421612260361,0.722381170118,0.732291538493,0.596634102381,0.227320326279,0.8682848541,0.781847781848,0.0583301071106,0.267346324257,0.0,1.0,0.111145027812,0.306517322112,0.772070157897,0.401803493201,0.431549314883,0.401105410365,0.217108569064,0.414693673953,0.168293160886,0.190990593768,0.411875367431,0.243582206545,0.215731195113,0.368188204346,0.509616660034,0.410013592604,0.749319698662,0.0,0.222492838013,0.431642792618,0.387968353486,0.322636425785,0.0985757903321,0.492471613684,0.416045520668,0.328932723755,0.311883002359,0.134695615155,0.278484413142,0.248244066958,0.107147598187]]
            xzlabel = ['HI','CT','MA','CO','VT','RI','MT','UT','NJ','CA','AZ','FL','NM','NY','NV','NH','ME','WY','WA','ID','MN','OR','MD','VA','IL','WI','PA','KS','ND','DE','SD','IA','NE','OH','NC','TX','AK','MO','IN','GA','MI','AR','OK','KY','TN','SC','LA','AL','WV','MS']

            y01z = d3.stack().keys(d3.range(n))(d3.transpose(yz)),
            yMax = d3.max(yz, function(y) { return d3.max(y); }),
            y1Max = d3.max(y01z, function(y) { return d3.max(y, function(d) { return d[1]; }); });


        var svg = d3.select("svg"),
            margin = {top: 40, right: 10, bottom: 20, left: 10},
            width = +svg.attr("width") - margin.left - margin.right,
            height = +svg.attr("height") - margin.top - margin.bottom,
            g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        
        var x = d3.scaleBand()
            .domain(xz)
            .rangeRound([0, width])
            .padding(0.08);
        var y = d3.scaleLinear()
            .domain([0, y1Max])
            .range([height, 0]);
        var color = d3.scaleOrdinal()
            .domain(d3.range(n))
            .range(d3.schemeCategory10);
        var series = g.selectAll(".series")
          .data(y01z)
          .enter().append("g")
            .attr("fill", function(d, i) { return color(i); });
        var rect = series.selectAll("rect")
          .data(function(d) { return d; })
          .enter().append("rect")
            .attr("x", function(d, i) { return x(i); })
            .attr("y", height)
            .attr("width", x.bandwidth())
            .attr("height", 0);

        rect.transition()
            .delay(function(d, i) { return i * 10; })
            .attr("y", function(d) { return y(d[1]); })
            .attr("height", function(d) { return y(d[0]) - y(d[1]); });
        g.append("g")
            .attr("class", "axis axis--x")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x)
                .tickFormat(function(d,i){ return xzlabel[i] })
                .tickSize(0)
                .tickPadding(6));
        d3.selectAll("input")
            .on("change", changed);
        var timeout = d3.timeout(function() {
          d3.select("input[value=\"grouped\"]")
              .property("checked", true)
              .dispatch("change");
        }, 2000);
        function changed() {
          timeout.stop();
          if (this.value === "grouped") transitionGrouped();
          else transitionStacked();
        }
        function transitionGrouped() {
          y.domain([0, yMax]);
          rect.transition()
              .duration(500)
              .delay(function(d, i) { return i * 10; })
              .attr("x", function(d, i) { return x(i) + x.bandwidth() / n * this.parentNode.__data__.key; })
              .attr("width", x.bandwidth() / n)
            .transition()
              .attr("y", function(d) { return y(d[1] - d[0]); })
              .attr("height", function(d) { return y(0) - y(d[1] - d[0]); });
        }
        function transitionStacked() {
          y.domain([0, y1Max]);
          rect.transition()
              .duration(500)
              .delay(function(d, i) { return i * 10; })
              .attr("y", function(d) { return y(d[1]); })
              .attr("height", function(d) { return y(d[0]) - y(d[1]); })
            .transition()
              .attr("x", function(d, i) { return x(i); })
              .attr("width", x.bandwidth());
        }


        //d3.csv("data_obese_pokecount.csv", type, function(error, data) {
          //x.domain(data.map(function(d) { return d.state; }));
          //y.domain([0, d3.max(data, function(d) { return d.frequency; })]);
        </script>
    </div>
</div>


<div class="content-section-a">
    <div class="container">
    <hr class="section-heading-spacer">
    <div class="clearfix"></div>
        <h2 class="section-heading" align="left">What other topics do fans care about?</h2>
        <p class="lead" align="left">I explored the messy tweets using Natural Language Processing techniques, and created the wordclouds of the most frequent words and hashtags from Pokémon tweets.</p>
        
        <div class="row">
            <div class="col-lg-5 col-sm-6">
                <img class="img-responsive" src="../static/wcld_pokemon-2017.png" alt="">
            </div>
            <div class="ccol-lg-5 col-lg-offset-2 col-sm-6">
                <img class="img-responsive" src="../static/wcld_pokemon2-2017.png" alt="">
            </div>
        </div>
    </div>
</div>

<div class="content-section-a">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 col-sm-6">
                    <h2 class="section-heading" align="left">#PokémonGo &amp; <span style="color:#009900">#Udemy</span></h2>

                    <p class="lead" align="left">Want to learn? Here are bunch of Udemy courses for you: </p>
                    <li style="font-size:16px" align=left> <a href="https://www.udemy.com/pokemon-go-for-beginners/">Play Pokémon GO Like a Seasoned Professional</a></li>
                    <li style="font-size:16px" align="left"> <a href="https://www.udemy.com/pokemon-go-explode-your-business/">Create a Pokémon GO Marketing Campaign</a></li>
                    <li style="font-size:16px" align=left> <a href="https://www.udemy.com/make-your-own-pokemon-go-game-for-ios-10/">Make Your Own Pokémon GO Game for iOS 10 </a></li>

                    <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">$10 OFFER - Make Your Own <a href="https://twitter.com/hashtag/pokemon?src=hash">#pokemon</a> Go <a href="https://twitter.com/hashtag/game?src=hash">#game</a> For <a href="https://twitter.com/hashtag/iOS?src=hash">#iOS</a> 10 <a href="https://twitter.com/hashtag/udemy?src=hash">#udemy</a> <a href="https://twitter.com/hashtag/offer?src=hash">#offer</a> <a href="https://t.co/fALopRQaK3">https://t.co/fALopRQaK3</a></p>&mdash; Learn Online (@mylearnonline) <a href="https://twitter.com/mylearnonline/status/816280534359928833">January 3, 2017</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>

                <div class="ccol-lg-5 col-lg-offset-2 col-sm-6">
                <h2 class="section-heading" align="left">#PokémonGo &amp; <span style="color:#CE2A08">#Turkey</span></h2>
                    <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Sometimes <a href="https://twitter.com/hashtag/Health?src=hash">#Health</a> advice can be virtual! <a href="https://twitter.com/hashtag/Turkey?src=hash">#Turkey</a> <a href="https://twitter.com/hashtag/Ministry?src=hash">#Ministry</a> suggests not hunting for <a href="https://twitter.com/hashtag/pokemon?src=hash">#pokemon</a> 11am-4pm | <a href="https://t.co/gRGPuVHMD0">https://t.co/gRGPuVHMD0</a> <a href="https://twitter.com/hashtag/PokemonGo?src=hash">#PokemonGo</a></p>&mdash; EBN Health (@EBNHealth) <a href="https://twitter.com/EBNHealth/status/756057394904494080">July 21, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>  
                </div>
            </div>

        </div>
        <!-- /.container -->
</div>

<div class="container">
    <div class="col-md-12">
        <hr class="section-headingspacer" align="center">
        <div class="clearfix"></div>
        <h1 class="section-heading" align="left">Topic modeling</h1>
                <p class="lead" align="left">Using a k-means clustering algorithm, I'm able to cluster tweets into different topics, which are covers wide range of topics including education, politics, entertainment, and etc. </p>
    </div>
    <div class="row">
        <div class="col-lg-5 col-sm-6">
            <img class="img-responsive" src="../static/wcld_topics.png" alt="">
        </div>

        <div class="ccol-lg-5 col-lg-offset-2 col-sm-6">
            <h3>Education: <span style="color:#EE5E1F; font-style:italic;">Matric</span></h3>
            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Pokemon Go should be prohibited to South African kids who do not have matric. Let them grow up 1st.. then let them play with us Pokemon Go</p>&mdash; ICU Security Guard (@IamDrJohannes) <a href="https://twitter.com/IamDrJohannes/status/757172193075814400">July 24, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <h3>Politics: <span style="color:#1F2DEE; font-style:italic;">Pantsuit</span></h3>
            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Some lady in a snazzy pantsuit told me to pokemon go to the ballot, so I did. Pikachu wasn&#39;t there either.</p>&mdash; Benjamin Musel (@BennyBeThis) <a href="https://twitter.com/BennyBeThis/status/763145400509423616">August 9, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <img class="img-responsive" src="../static/pantsuit.png" alt="">
        </div>
    </div>

    <div class="row">
        <div class="col-lg-5 col-sm-6">
            <h3>Entertainment: <span style="color:#EE5E1F; font-style:italic;">Luckyzilla</span></h3>
            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">With this whole Pokemon Go craze, how can we not weigh in on it with our own two cents? <a href="https://twitter.com/hashtag/luckyzilla?src=hash">#luckyzilla</a> <a href="https://twitter.com/hashtag/pokemongo?src=hash">#pokemongo</a> <a href="https://t.co/vmjsnLsAYc">pic.twitter.com/vmjsnLsAYc</a></p>&mdash; Luckyzilla (@Luckyzilla) <a href="https://twitter.com/Luckyzilla/status/752559344047226915">July 11, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <h3>Entertainment: <span style="color:#1FEEEE; font-style:italic;">Eggception</span></h3>
            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">My egg hatched an Exeggcute. EGGCEPTION <a href="https://twitter.com/hashtag/PokemonGO?src=hash">#PokemonGO</a><a href="https://t.co/qc0mWLsGkR">pic.twitter.com/qc0mWLsGkR</a></p>&mdash; Charlie (@cwatkins94) <a href="https://twitter.com/cwatkins94/status/761560466707640320">August 5, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


        </div>
        <div class="ccol-lg-5 col-lg-offset-2 col-sm-6">
            <h3>Entertainment: <span style="color:#EEB01F; font-style:italic;">Fedora</span></h3>

            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">That moment when a guy in a fedora and pajama pants steals your <a href="https://twitter.com/hashtag/PokemonGo?src=hash">#PokemonGo</a> gym.</p>&mdash; The Domestic Geek (@TheDomesticGeek) <a href="https://twitter.com/TheDomesticGeek/status/757740441332625408">July 26, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Spotted: Pokémon Go player wearing a fedora and toe shoes in the engineering building.</p>&mdash; Vasili Doan (@swissswiss2) <a href="https://twitter.com/swissswiss2/status/768476955352113152">August 24, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">if u need me u can find me wearing a fedora vaping on a hover board while playing pokémon go</p>&mdash; Dad (@_branvan) <a href="https://twitter.com/_branvan/status/776154637854539776">September 14, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

            <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Who is the old lady in the fedora trying to catch Pidgey? <a href="https://twitter.com/hashtag/PokemonGO?src=hash">#PokemonGO</a> <a href="https://t.co/Bq6FjndwDU">pic.twitter.com/Bq6FjndwDU</a></p>&mdash; BenJo Bubble (@BenJoBubble) <a href="https://twitter.com/BenJoBubble/status/752616241173442560">July 11, 2016</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>

    </div>
</div>
</div>

</body>

</html>
{% endblock %}
